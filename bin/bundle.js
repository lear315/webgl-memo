!function(t){var e={};function r(o){if(e[o])return e[o].exports;var n=e[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=e,r.d=function(t,e,o){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(o,n,function(e){return t[e]}.bind(null,n));return o},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const o=r(1),n=r(2),i=r(3);new class{constructor(){this.positions=[-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1],this.indices=[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23],this.faceColors=[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0,1,1],this.normals=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0],this.draw()}draw(){let t=document.querySelector("#glcanvas");this.canvas=t;let e=t.getContext("webgl");if(this.gl=e,!e)return void console.log("你的浏览器不支持webgl");let r=e.createProgram();const i=this.loadShader(e,e.VERTEX_SHADER,n.default),a=this.loadShader(e,e.FRAGMENT_SHADER,o.default);e.attachShader(r,i),e.attachShader(r,a),e.linkProgram(r),e.useProgram(r),e.clearColor(0,0,0,1),e.clearDepth(1),e.enable(e.DEPTH_TEST),e.depthFunc(e.LEQUAL),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),e.useProgram(r),this.drawScene(e,r)}drawScene(t,e){let r=t.getAttribLocation(e,"a_position");this.worldViewProjectionLoc=t.getUniformLocation(e,"u_worldViewProjection"),this.modelViewMatrixLoc=t.getUniformLocation(e,"uModelViewMatrix"),this.projectionMatrixLoc=t.getUniformLocation(e,"uProjectionMatrix");let o=t.getAttribLocation(e,"aVertexColor"),n=t.getAttribLocation(e,"a_normal"),i=t.getUniformLocation(e,"u_light"),a=new Float32Array([.1,.3,.8]);t.uniform3fv(i,a);let l=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,l),t.bufferData(t.ARRAY_BUFFER,new Float32Array(this.positions),t.STATIC_DRAW),t.vertexAttribPointer(r,3,t.FLOAT,!1,0,0),t.enableVertexAttribArray(r);let c=t.createBuffer();t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,c),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array(this.indices),t.STATIC_DRAW);let u=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,u),t.bufferData(t.ARRAY_BUFFER,new Float32Array(this.faceColors),t.STATIC_DRAW),t.vertexAttribPointer(o,4,t.FLOAT,!1,0,0),t.enableVertexAttribArray(o);let s=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,s),t.bufferData(t.ARRAY_BUFFER,new Float32Array(this.normals),t.STATIC_DRAW),t.vertexAttribPointer(n,3,t.FLOAT,!1,0,0),t.enableVertexAttribArray(n),window.requestAnimationFrame(this.render.bind(this))}render(t){t/=1e3;let e=this.gl;e.clearColor(0,0,0,1),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT);let r=45*Math.PI/180,o=this.canvas.clientWidth/this.canvas.clientHeight,n=i.default.perspective(r,o,.01,500),a=[5,1,5],l=i.default.lookAt(a,[0,0,0],[0,1,0]),c=i.default.multiplyMatrix(l,n);e.uniformMatrix4fv(this.worldViewProjectionLoc,!1,c);let u=i.default.mat4();u=i.default.rotate(u,u,t,[0,0,1]),e.uniformMatrix4fv(this.modelViewMatrixLoc,!1,u),e.uniformMatrix4fv(this.projectionMatrixLoc,!1,c),e.drawElements(e.TRIANGLES,this.indices.length,e.UNSIGNED_SHORT,0),requestAnimationFrame(this.render.bind(this))}loadShader(t,e,r){const o=t.createShader(e);return t.shaderSource(o,r),t.compileShader(o),o}}},function(t,e,r){"use strict";r.r(e),e.default="precision mediump float;\r\nvarying lowp vec4 vColor;\r\nvarying lowp vec3 v_normal;\r\n\r\n//方向光的方向\r\nuniform lowp vec3 u_light;\r\n\r\nvoid main() {\r\n    vec3 normal = normalize(v_normal);\r\n    float light = max(dot(normal, u_light), 0.1);\r\n    gl_FragColor = vColor;\r\n    gl_FragColor.rgb *= light;\r\n}"},function(t,e,r){"use strict";r.r(e),e.default="attribute vec4 a_position;\r\nuniform mat4 u_worldViewProjection;\r\nattribute vec4 aVertexColor;\r\n//法向量的变量\r\nattribute vec3 a_normal;\r\n\r\nuniform mat4 uModelViewMatrix;\r\nuniform mat4 uProjectionMatrix;\r\n\r\n\r\nvarying lowp vec4 vColor;\r\n//将法向量从顶点着色器传递到片元着色器的变量\r\nvarying lowp vec3 v_normal;\r\n\r\nvoid main() {\r\n    gl_Position = uModelViewMatrix * uProjectionMatrix * a_position;\r\n    vColor = aVertexColor;\r\n    v_normal = mat3(uModelViewMatrix) * a_normal;\r\n}"},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class o{static mat4(){var t=[];return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}static subVector(t,e){let r=[],o=t.length;for(let n=0;n<o;++n)r[n]=t[n]-e[n];return r}static dot(t,e){let r=0,o=t.length;for(let n=0;n<o;++n)r+=t[n]*e[n];return r}static cross(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}static normalize(t){let e=[],r=0,o=t.length;for(let e=0;e<o;++e)r+=t[e]*t[e];if(r=Math.sqrt(r),r>1e-5)for(let n=0;n<o;++n)e[n]=t[n]/r;else e=[0,0,0];return e}static transformPoint(t,e){let r=e[0],o=e[1],n=e[2],i=r*t[3]+o*t[7]+n*t[11]+t[15];return[(r*t[0]+o*t[4]+n*t[8]+t[12])/i,(r*t[1]+o*t[5]+n*t[9]+t[13])/i,(r*t[2]+o*t[6]+n*t[10]+t[14])/i]}static identity(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}static rotate(t,e,r,n){var i,a,l,c,u,s,f,d,m,h,A,_,v,b,g,p,R,F,M,w,E,x,y,P,S=n[0],T=n[1],L=n[2],B=Math.sqrt(S*S+T*T+L*L);return Math.abs(B)<o.EPSILON?null:(S*=B=1/B,T*=B,L*=B,i=Math.sin(r),l=1-(a=Math.cos(r)),c=e[0],u=e[1],s=e[2],f=e[3],d=e[4],m=e[5],h=e[6],A=e[7],_=e[8],v=e[9],b=e[10],g=e[11],p=S*S*l+a,R=T*S*l+L*i,F=L*S*l-T*i,M=S*T*l-L*i,w=T*T*l+a,E=L*T*l+S*i,x=S*L*l+T*i,y=T*L*l-S*i,P=L*L*l+a,t[0]=c*p+d*R+_*F,t[1]=u*p+m*R+v*F,t[2]=s*p+h*R+b*F,t[3]=f*p+A*R+g*F,t[4]=c*M+d*w+_*E,t[5]=u*M+m*w+v*E,t[6]=s*M+h*w+b*E,t[7]=f*M+A*w+g*E,t[8]=c*x+d*y+_*P,t[9]=u*x+m*y+v*P,t[10]=s*x+h*y+b*P,t[11]=f*x+A*y+g*P,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}static multiplyMatrix(t,e){let r=t[0],o=t[1],n=t[2],i=t[3],a=t[4],l=t[5],c=t[6],u=t[7],s=t[8],f=t[9],d=t[10],m=t[11],h=t[12],A=t[13],_=t[14],v=t[15],b=e[0],g=e[1],p=e[2],R=e[3],F=e[4],M=e[5],w=e[6],E=e[7],x=e[8],y=e[9],P=e[10],S=e[11],T=e[12],L=e[13],B=e[14],C=e[15];return[r*b+o*F+n*x+i*T,r*g+o*M+n*y+i*L,r*p+o*w+n*P+i*B,r*R+o*E+n*S+i*C,a*b+l*F+c*x+u*T,a*g+l*M+c*y+u*L,a*p+l*w+c*P+u*B,a*R+l*E+c*S+u*C,s*b+f*F+d*x+m*T,s*g+f*M+d*y+m*L,s*p+f*w+d*P+m*B,s*R+f*E+d*S+m*C,h*b+A*F+_*x+v*T,h*g+A*M+_*y+v*L,h*p+A*w+_*P+v*B,h*R+A*E+_*S+v*C]}static inverse(t){let e=t[10]*t[15],r=t[14]*t[11],o=t[6]*t[15],n=t[14]*t[7],i=t[6]*t[11],a=t[10]*t[7],l=t[2]*t[15],c=t[14]*t[3],u=t[2]*t[11],s=t[10]*t[3],f=t[2]*t[7],d=t[6]*t[3],m=t[8]*t[13],h=t[12]*t[9],A=t[4]*t[13],_=t[12]*t[5],v=t[4]*t[9],b=t[8]*t[5],g=t[0]*t[13],p=t[12]*t[1],R=t[0]*t[9],F=t[8]*t[1],M=t[0]*t[5],w=t[4]*t[1],E=e*t[5]+n*t[9]+i*t[13]-(r*t[5]+o*t[9]+a*t[13]),x=r*t[1]+l*t[9]+s*t[13]-(e*t[1]+c*t[9]+u*t[13]),y=o*t[1]+c*t[5]+f*t[13]-(n*t[1]+l*t[5]+d*t[13]),P=a*t[1]+u*t[5]+d*t[9]-(i*t[1]+s*t[5]+f*t[9]),S=1/(t[0]*E+t[4]*x+t[8]*y+t[12]*P);return[S*E,S*x,S*y,S*P,S*(r*t[4]+o*t[8]+a*t[12]-(e*t[4]+n*t[8]+i*t[12])),S*(e*t[0]+c*t[8]+u*t[12]-(r*t[0]+l*t[8]+s*t[12])),S*(n*t[0]+l*t[4]+d*t[12]-(o*t[0]+c*t[4]+f*t[12])),S*(i*t[0]+s*t[4]+f*t[8]-(a*t[0]+u*t[4]+d*t[8])),S*(m*t[7]+_*t[11]+v*t[15]-(h*t[7]+A*t[11]+b*t[15])),S*(h*t[3]+g*t[11]+F*t[15]-(m*t[3]+p*t[11]+R*t[15])),S*(A*t[3]+p*t[7]+M*t[15]-(_*t[3]+g*t[7]+w*t[15])),S*(b*t[3]+R*t[7]+w*t[11]-(v*t[3]+F*t[7]+M*t[11])),S*(A*t[10]+b*t[14]+h*t[6]-(v*t[14]+m*t[6]+_*t[10])),S*(R*t[14]+m*t[2]+p*t[10]-(g*t[10]+F*t[14]+h*t[2])),S*(g*t[6]+w*t[14]+_*t[2]-(M*t[14]+A*t[2]+p*t[6])),S*(M*t[10]+v*t[2]+F*t[6]-(R*t[6]+w*t[10]+b*t[2]))]}static perspective(t,e,r,o){let n=Math.tan(.5*Math.PI-.5*t),i=1/(r-o);return[n/e,0,0,0,0,n,0,0,0,0,(r+o)*i,-1,0,0,r*o*i*2,0]}static cameraLookAt(t,e,r){let n=o.normalize(o.subVector(t,e)),i=o.normalize(o.cross(r,n)),a=o.cross(n,i);return o.inverse([i[0],i[1],i[2],0,a[0],a[1],a[2],0,n[0],n[1],n[2],0,-o.dot(i,t),-o.dot(a,t),-o.dot(n,t),1])}static lookAt(t,e,r){return o.inverse(o.cameraLookAt(t,e,r))}}e.default=o,o.EPSILON=1e-6}]);
//# sourceMappingURL=bundle.js.map